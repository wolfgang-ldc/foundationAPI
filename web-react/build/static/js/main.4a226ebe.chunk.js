(this["webpackJsonpgrand-stack-starter-web-react"]=this["webpackJsonpgrand-stack-starter-web-react"]||[]).push([[0],{295:function(e,t,n){},484:function(e,t,n){"use strict";n.r(t);var a,r=n(1),s=n.n(r),i=n(18),c=n.n(i),o=(n(295),n(65)),l=n(102),j=n(70),d=n(23),b=n(59),h=n(29),x=n(8),p=n(486),O=n(546),g=n(525),m=n(526),u=n(527),f=n(528),v=n(550),w=n(551),y=n(529),N=n(105),S=n(6);function k(e){return Object(S.jsx)(N.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}const C=Object(h.gql)(a||(a=Object(b.a)(["\n  query usersPaginateQuery(\n    $first: Int\n    $offset: Int\n    $orderBy: [UserSort]\n    $filter: UserWhere\n  ) {\n    users(\n      options: { limit: $first, skip: $offset, sort: $orderBy }\n      where: $filter\n    ) {\n      id: userId\n      name\n      avgStars\n      numReviews\n    }\n  }\n"])));var B,D=Object(x.a)((e=>({root:{maxWidth:700,marginTop:e.spacing(3),overflowX:"auto",margin:"auto"},table:{minWidth:700},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),minWidth:300}})))((function(e){const t=e.classes,n=s.a.useState("ASC"),a=Object(o.a)(n,2),r=a[0],i=a[1],c=s.a.useState("name"),j=Object(o.a)(c,2),d=j[0],b=j[1],x=s.a.useState(0),N=Object(o.a)(x,1)[0],B=s.a.useState(10),D=Object(o.a)(B,1)[0],R=s.a.useState({usernameFilter:""}),L=Object(o.a)(R,2),I=L[0],A=L[1],F=Object(h.useQuery)(C,{variables:{first:D,offset:D*N,orderBy:{[d]:r},filter:I.usernameFilter.length>0?{name_CONTAINS:I.usernameFilter}:{}}}),W=F.loading,E=F.data,$=F.error;return Object(S.jsxs)(p.a,{className:t.root,children:[Object(S.jsx)(k,{children:"User List"}),Object(S.jsx)(O.a,{id:"search",label:"User Name Contains",className:t.textField,value:I.usernameFilter,onChange:(T="usernameFilter",e=>{const t=e.target.value;A((e=>Object(l.a)(Object(l.a)({},e),{},{[T]:t})))}),margin:"normal",variant:"outlined",type:"text",InputProps:{className:t.input}}),W&&!$&&Object(S.jsx)("p",{children:"Loading..."}),$&&!W&&Object(S.jsx)("p",{children:"Error"}),E&&!W&&!$&&Object(S.jsxs)(g.a,{className:t.table,children:[Object(S.jsx)(m.a,{children:Object(S.jsxs)(u.a,{children:[Object(S.jsx)(f.a,{sortDirection:"name"===d&&r.toLowerCase(),children:Object(S.jsx)(v.a,{title:"Sort",placement:"bottom-start",enterDelay:300,children:Object(S.jsx)(w.a,{active:"name"===d,direction:r.toLowerCase(),onClick:()=>(e=>{const t=e;let n="DESC";d===e&&"DESC"===r&&(n="ASC"),i(n),b(t)})("name"),children:"Name"})})},"name"),Object(S.jsx)(f.a,{children:"Average Stars"},"avgStars"),Object(S.jsx)(f.a,{children:"Number of Reviews"},"numReviews")]})}),Object(S.jsx)(y.a,{children:E.users.map((e=>Object(S.jsxs)(u.a,{children:[Object(S.jsx)(f.a,{component:"th",scope:"row",children:e.name}),Object(S.jsx)(f.a,{children:e.avgStars?e.avgStars.toFixed(2):"-"}),Object(S.jsx)(f.a,{children:e.numReviews})]},e.id)))})]})]});var T})),R=n(7),L=n(530),I=n(532),A=n(533),F=n(534),W=n(535),E=n(536),$=n(549),T=n(539),U=n(524),H=n(540),P=n(541),q=n(543),Q=n(545),Y=n(547),G=n(537),M=n(538),z=n(542),J=n(544),K=n(33),X=n(531),V=n(71);const _=Object(h.gql)(B||(B=Object(b.a)(["\n  {\n    ratingsCount {\n      stars\n      count\n    }\n  }\n"])));function Z(){const e=Object(K.a)(),t=Object(h.useQuery)(_),n=t.loading,a=t.error,r=t.data;return a?Object(S.jsx)("p",{children:"Error"}):n?Object(S.jsx)("p",{children:"Loading"}):Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(k,{children:"Ratings Distribution"}),Object(S.jsx)(V.d,{children:Object(S.jsxs)(V.b,{data:r.ratingsCount,margin:{top:16,right:16,bottom:0,left:24},children:[Object(S.jsx)(V.e,{dataKey:"stars",stroke:e.palette.text.secondary}),Object(S.jsx)(V.f,{stroke:e.palette.text.secondary,children:Object(S.jsx)(V.c,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary},children:"Count"})}),Object(S.jsx)(V.a,{dataKey:"count",fill:e.palette.primary.main})]})})]})}var ee;const te=Object(L.a)({depositContext:{flex:1},navLink:{textDecoration:"none"}}),ne=Object(h.gql)(ee||(ee=Object(b.a)(["\n  {\n    userCount\n  }\n"])));function ae(){const e=te(),t=Object(h.useQuery)(ne),n=t.loading,a=t.error,r=t.data;return a?Object(S.jsx)("p",{children:"Error"}):Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(k,{children:"Total Users"}),Object(S.jsx)(N.a,{component:"p",variant:"h4",children:n?"Loading...":r.userCount}),Object(S.jsx)(N.a,{color:"textSecondary",className:e.depositContext,children:"users found"}),Object(S.jsx)("div",{children:Object(S.jsx)(j.b,{to:"/users",className:e.navLink,children:"View users"})})]})}var re,se=n(251),ie=n.n(se);const ce=Object(h.gql)(re||(re=Object(b.a)(["\n  {\n    reviews(options: { limit: 10, sort: { date: DESC } }) {\n      user {\n        name\n      }\n      business {\n        name\n      }\n      date\n      text\n      stars\n    }\n  }\n"])));function oe(){const e=Object(h.useQuery)(ce),t=e.loading,n=e.error,a=e.data;return n?Object(S.jsx)("p",{children:"Error"}):t?Object(S.jsx)("p",{children:"Loading"}):Object(S.jsxs)(s.a.Fragment,{children:[Object(S.jsx)(k,{children:"Recent Reviews"}),Object(S.jsxs)(g.a,{size:"small",children:[Object(S.jsx)(m.a,{children:Object(S.jsxs)(u.a,{children:[Object(S.jsx)(f.a,{children:"Date"}),Object(S.jsx)(f.a,{children:"Business Name"}),Object(S.jsx)(f.a,{children:"User Name"}),Object(S.jsx)(f.a,{children:"Review Text"}),Object(S.jsx)(f.a,{align:"right",children:"Review Stars"})]})}),Object(S.jsx)(y.a,{children:a.reviews.map((e=>Object(S.jsxs)(u.a,{children:[Object(S.jsx)(f.a,{children:ie()(e.date).format("MMMM Do YYYY")}),Object(S.jsx)(f.a,{children:e.business.name}),Object(S.jsx)(f.a,{children:e.user.name}),Object(S.jsx)(f.a,{children:e.text}),Object(S.jsx)(f.a,{align:"right",children:e.stars})]},e.id)))})]})]})}function le(){const e=Object(K.a)(),t=Object(L.a)((e=>({root:{display:"flex"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}})))(e),n=Object(R.a)(t.paper,t.fixedHeight);return Object(S.jsx)(s.a.Fragment,{children:Object(S.jsxs)(X.a,{container:!0,spacing:4,children:[Object(S.jsx)(X.a,{item:!0,xs:12,md:8,lg:7,children:Object(S.jsx)(p.a,{className:n,children:Object(S.jsx)(Z,{})})}),Object(S.jsx)(X.a,{item:!0,xs:12,md:4,lg:5,children:Object(S.jsx)(p.a,{className:n,children:Object(S.jsx)(ae,{})})}),Object(S.jsx)(X.a,{item:!0,xs:12,children:Object(S.jsx)(p.a,{className:t.paper,children:Object(S.jsx)(oe,{})})})]})})}function je(){return Object(S.jsxs)(N.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(S.jsx)(I.a,{color:"inherit",href:"https://grandstack.io/",children:"Your GRANDstack App Name Here"})," ",(new Date).getFullYear(),"."]})}const de=Object(L.a)((e=>({root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7),[e.breakpoints.up("sm")]:{width:e.spacing(9)}},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},navLink:{textDecoration:"none",color:"inherit"},appBarImage:{maxHeight:"75px",paddingRight:"20px"}})));function be(){const e=de(),t=s.a.useState(!0),n=Object(o.a)(t,2),a=n[0],r=n[1];return Object(S.jsx)(j.a,{children:Object(S.jsxs)("div",{className:e.root,children:[Object(S.jsx)(A.a,{}),Object(S.jsx)(F.a,{position:"absolute",className:Object(R.a)(e.appBar,a&&e.appBarShift),children:Object(S.jsxs)(W.a,{className:e.toolbar,children:[Object(S.jsx)(E.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:()=>{r(!0)},className:Object(R.a)(e.menuButton,a&&e.menuButtonHidden),children:Object(S.jsx)(G.a,{})}),Object(S.jsx)("img",{className:e.appBarImage,src:"img/grandstack.png",alt:"GRANDstack logo"}),Object(S.jsx)(N.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title,children:"Welcome To GRANDstack App"})]})}),Object(S.jsxs)($.a,{variant:"permanent",classes:{paper:Object(R.a)(e.drawerPaper,!a&&e.drawerPaperClose)},open:a,children:[Object(S.jsx)("div",{className:e.toolbarIcon,children:Object(S.jsx)(E.a,{onClick:()=>{r(!1)},children:Object(S.jsx)(M.a,{})})}),Object(S.jsx)(T.a,{}),Object(S.jsxs)(U.a,{children:[Object(S.jsx)(j.b,{to:"/",className:e.navLink,children:Object(S.jsxs)(H.a,{button:!0,children:[Object(S.jsx)(P.a,{children:Object(S.jsx)(z.a,{})}),Object(S.jsx)(q.a,{primary:"Dashboard"})]})}),Object(S.jsx)(j.b,{to:"/users",className:e.navLink,children:Object(S.jsxs)(H.a,{button:!0,children:[Object(S.jsx)(P.a,{children:Object(S.jsx)(J.a,{})}),Object(S.jsx)(q.a,{primary:"Users"})]})})]}),Object(S.jsx)(T.a,{})]}),Object(S.jsxs)("main",{className:e.content,children:[Object(S.jsx)("div",{className:e.appBarSpacer}),Object(S.jsxs)(Q.a,{maxWidth:"lg",className:e.container,children:[Object(S.jsxs)(d.c,{children:[Object(S.jsx)(d.a,{exact:!0,path:"/",component:le}),Object(S.jsx)(d.a,{exact:!0,path:"/businesses",component:D}),Object(S.jsx)(d.a,{exact:!0,path:"/users",component:D})]}),Object(S.jsx)(Y.a,{pt:4,children:Object(S.jsx)(je,{})})]})]})]})})}const he=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xe(e){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((e=>{console.error("Error during service worker registration:",e)}))}const pe=new h.ApolloClient({uri:"/graphql",cache:new h.InMemoryCache}),Oe=()=>Object(S.jsx)(h.ApolloProvider,{client:pe,children:Object(S.jsx)(be,{})});c.a.render(Object(S.jsx)(Oe,{}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const e="".concat("","/service-worker.js");he?(!function(e){fetch(e).then((t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):xe(e)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):xe(e)}))}}()}},[[484,1,2]]]);
//# sourceMappingURL=main.4a226ebe.chunk.js.map